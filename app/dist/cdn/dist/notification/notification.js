define(["jquery"],function(e){(function(e){function t(e){this._options=n.extend({mode:"msg",text:"网页提示",useTap:!1},e||{}),this._init()}var n=e,r=n(window),i=n('<div class="c-float-popWrap msgMode hide"><div class="c-float-modePop"><div class="warnMsg"></div><div class="content"></div><div class="doBtn"><button class="ok">确定</button><button class="cancel">取消</button></div></div></div>'),s=i.find(".warnMsg"),o=i.find(".content"),u=i.find(".doBtn .ok"),a=i.find(".doBtn .cancel"),f=!1,l;n.extend(t.prototype,{_init:function(){var e=this,t=e._options,l=t.mode,c=t.text,v=t.content,g=t.callback,y=t.background,t=t.useTap?"tap":"click",b=i.attr("class"),b=b.replace(/(msg|alert|confirm)Mode/i,l+"Mode");i.attr("class",b),y&&i.css("background",y),c&&s.html(c),v&&o.html(v),u.off(t).on(t,function(t){g.call(e,t,!0)}),a.off(t).on(t,function(t){g.call(e,t,!1)}),f||(f=!0,n("body").append(i),r.on("resize",function(){setTimeout(function(){e._pos()},500)}))},_pos:function(){var e=document,t=e.documentElement,n=e.body,r,s,o;this.isHide()||(e=n.scrollTop,n=n.scrollLeft,r=t.clientWidth,t=t.clientHeight,s=i.width(),o=i.height(),i.css({top:e+(t-o)/2,left:n+(r-s)/2}))},isShow:function(){return i.hasClass("show")},isHide:function(){return i.hasClass("hide")},_cbShow:function(){var e=this._options.onShow;i.css("opacity","1").addClass("show"),e&&e.call(this)},show:function(){var e=this;l&&(clearTimeout(l),l=void 0),e.isShow()?e._cbShow():(i.css("opacity","0").removeClass("hide"),e._pos(),setTimeout(function(){e._cbShow()},300),setTimeout(function(){i.animate({opacity:"1"},300,"linear")},1))},_cbHide:function(){var e=this._options.onHide;i.css("opacity","0").addClass("hide"),e&&e.call(this)},hide:function(){var e=this;e.isHide()?e._cbHide():(i.css("opacity","1").removeClass("show"),setTimeout(function(){e._cbHide()},300),setTimeout(function(){i.animate({opacity:"0"},300,"linear")},1))},flash:function(e){var t=this,n=t._options;n.onShow=function(){l=setTimeout(function(){l&&t.hide()},e)},t.show()}});var c=new function(){this.simple=function(e,n,r){2==arguments.length&&"number"==typeof arguments[1]&&(r=arguments[1],n=void 0);var i=new t({mode:"msg",text:e,background:n});return i.flash(r||2e3),i},this.msg=function(e,r){return new t(n.extend({mode:"msg",text:e},r||{}))},this.alert=function(e,r,i){return new t(n.extend({mode:"alert",text:e,callback:r},i||{}))},this.confirm=function(e,r,i,s){return new t(n.extend({mode:"confirm",text:e,content:r,callback:i},s||{}))},this.pop=function(e){return new t(e)}};window.floatNotify=window.notification=c})(e)});