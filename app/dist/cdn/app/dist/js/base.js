define(["jquery","base64","floatnotify"],function(e){(function(e){window.base=window.base||{},base.config=e.extend({basepath:"/rest",path:""},base.config),base.ajax={getJSON:function(t,n,r){e.ajaxSetup({cache:!1}),e.ajax({url:base.config.basepath+t,type:"get",data:n,dataType:"json",success:function(e){r(e)},error:function(e,t,n){e.status===401&&alert("您没有登录")},complete:function(e,t){this}})},postJSON:function(t,n,r){e.ajax({url:base.config.basepath+t,type:"post",data:n,dataType:"json",success:function(e){r(e)},error:function(e,t,n){e.status==="401"&&alert("没有登录")},complete:function(e,t){this}})},RESTful:function(t,n,r,i){e.ajax({url:base.config.basepath+t,type:n,data:JSON.stringify(r),contentType:"application/json; charset=UTF-8",dataType:"json",success:function(e){i(e)},error:function(e,t,n){e.status==="401"&&alert("没有登录")},complete:function(e,t){this}})}},base.util={getQueryName:function(e){var t=new RegExp("(^|\\?|&)"+e+"=([^&|#]*)(\\s|&|#|$)","i");return t.test(location.href)?RegExp.$2:""},checkhHtml5:function(){return typeof Worker!="undefined"?!0:!1},checkPC:function(){var e={win:!1,mac:!1,xll:!1},t=navigator.platform;return e.win=t.indexOf("Win")==0,e.mac=t.indexOf("Mac")==0,e.x11=t=="X11"||t.indexOf("Linux")==0,e.win||e.mac||e.xll?!0:!1},checkIE6:function(){if(window.ActiveXObject){var e=navigator.appName,t=navigator.appVersion,n=t.split(";"),r=n[1].replace(/[ ]/g,"");return e=="Microsoft Internet Explorer"&&r=="MSIE6.0"?!0:!1}return!1},checkIE7:function(){if(window.ActiveXObject){var e=navigator.appName,t=navigator.appVersion,n=t.split(";"),r=n[1].replace(/[ ]/g,"");return e=="Microsoft Internet Explorer"&&r=="MSIE7.0"?!0:!1}return!1},checkIE8:function(){if(window.ActiveXObject){var e=navigator.appName,t=navigator.appVersion,n=t.split(";"),r=n[1].replace(/[ ]/g,"");return e=="Microsoft Internet Explorer"&&r=="MSIE8.0"?!0:!1}return!1},helperTemplate:function(e){return e.helper("dateFormat",function(e,t){e=e.replace(/(\d{4}).(\d{1,2}).(\d{1,2}).+/mg,"$1/$2/$3");var n=new Date(e),r={M:n.getMonth()+1,d:n.getDate(),h:n.getHours(),m:n.getMinutes(),s:n.getSeconds(),q:Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};return t=t.replace(/([yMdhmsqS])+/g,function(e,t){var i=r[t];return i!==undefined?(e.length>1&&(i="0"+i,i=i.substr(i.length-2)),i):t==="y"?(n.getFullYear()+"").substr(4-e.length):e}),t}),e.helper("encodeFormat",function(e,t){return e=encodeURIComponent(e),e}),e},getPlat:function(){if(!this.plat){var e={win:!1,mac:!1,xll:!1},t=navigator.platform;e.win=t.indexOf("Win")==0,e.mac=t.indexOf("Mac")==0,e.x11=t=="X11"||t.indexOf("Linux")==0,e.win||e.mac||e.xll?this.plat="pc":this.plat="mobi"}return this.plat},getClickEvent:function(){var e=this.getPlat();return e==="mobi"?"touchend":"click"},getDateTime:function(e,t){var n=e.replace(/(\d{4}).(\d{1,2}).(\d{1,2}).+/mg,"$1/$2/$3");if(!n){var r=new Date;return r.setDate(r.getDate()+10),r}return n=n+" "+t,new Date(n)}}})(e)});